<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>


<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">KMF4PCM</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="#mc">Model Compare</a></li>
                <li><a href="#trace">Trace</a></li>
                <li><a href="#query">Query Langage</a></li>
                <li><a href="#path">Path Selection</a></li>
                <li><a href="#events">Events</a></li>
                <li><a href="#visit">Visitors</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>


<div class="container">

    <div class="starter-template">
        <h1>KMF4PCM</h1>
        <p class="lead">A quick introduction of the use of KMF for PCM</p>
    </div>


    <div id="mc" class="panel panel-default">
        <div class="panel-body">
           <h1> Model Compare</h1>
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


        </div>
    </div>

    <div id="trace" class="panel panel-default">
        <div class="panel-body">
              <h1>Trace</h1>
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


        </div>
    </div>


    <div id="query" class="panel panel-default">
        <div class="panel-body">
            <h1>Query</h1>
            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."



        </div>
    </div>


    <div id="path" class="panel panel-default">
        <div class="panel-body">
            <h1>Path Selection</h1>
            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."



        </div>
    </div>


    <div id="events" class="panel panel-default">
        <div class="panel-body">
            <h1>Model Events</h1>
            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."


            query
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."



        </div>
    </div>



    <div id="visit" class="panel panel-default">
        <div class="panel-body">
            <h1>Visitors</h1>
            <pre><p>
                <code class="js">
                    var modelVisitor  = new  Kotlin.modules['KPCMMM'].org.kevoree.modeling.api.util.ModelVisitor();
                modelVisitor.visit = function (elem) {
                console.log("visiting : " + elem.metaClassName());
                console.log( elem.path());
                var modelAttrVisitor  = new  Kotlin.modules['KPCMMM'].org.kevoree.modeling.api.util.ModelAttributeVisitor();
                modelAttrVisitor.visit = function (value,name,parent) {
                console.log("visiting Attributes");
                console.log( name.valueOf() + " " + value.valueOf());
                };
                elem.visitAttributes(modelAttrVisitor,true,true,true);
                };
                kPCM.visit(modelVisitor,true,true,false);
                </code>
            </p></pre>




        </div>
    </div>



</div><!-- /.container -->





<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="js/bootstrap.min.js"></script>
<script src="js/KPCMMM.merged.js"></script>
<script src="js/kpcmm-diplayer.js"></script>

<script type="text/javascript">matrixDisplay
    <!-- core -->
 var KPCMMM = Kotlin.modules['KPCMMM'].kpcmmm;
 var kev =    Kotlin.modules['KPCMMM'] ;
    var factory  = new KPCMMM.factory.DefaultKPCMMMFactory();

    var loader = factory.createJSONLoader();
    var modelElm = null;

    var compare = factory.createModelCompare();
    $.getJSON('./../data/Comparison_of_document_interfaces.json', function(data) {

        console.log(data);
      var  kPCM =   loader.loadModelFromString(JSON.stringify(data)).get(0);
        matrixDisplay(kPCM) ;
        console.log(kPCM.generated_KMF_ID);
        console.log(kPCM.metaClassName());
        console.log(kPCM.name);
        console.log(kPCM.title);
        console.log("Matrix size  : " + kPCM.matrices.size());
        console.log("Console  : " + kPCM.concepts.size());
        var modelVisitor  = new  Kotlin.modules['KPCMMM'].org.kevoree.modeling.api.util.ModelVisitor();
        modelVisitor.visit = function (elem) {
            console.log("visiting : " + elem.metaClassName());
            console.log( elem.path());



            var modelAttrVisitor  = new  Kotlin.modules['KPCMMM'].org.kevoree.modeling.api.util.ModelAttributeVisitor();
            modelAttrVisitor.visit = function (value,name,parent) {
                console.log("visiting Attributes");
               console.log( name.valueOf() + " " + value.valueOf());

            };

            elem.visitAttributes(modelAttrVisitor,true,true,true);
        };

        kPCM.visit(modelVisitor,true,true,false);
        var kmat = kPCM.matrices ;
        console.log(kmat.size());
        for(var i = 0 ; i < kmat.size() ; i++ )
        {
            console.log("matrix");
            console.log( kmat.get(i).path());
        }
      var res = kPCM.select("matrices[id = *]/cells[name = * windows *]");
        console.log("Select by query Cell that contain windows in name");
        console.log(res);





        $.getJSON('./../data/Comparison_of_free_credit_report_websites.json', function(data2) {
            var  kPCM2 =   loader.loadModelFromString(JSON.stringify(data2)).get(0);

            var tc = compare.merge(kPCM,kPCM2);
            console.log(tc);
            var lstTrace = tc.traces;
            for(var i = 0 ; i < lstTrace.size() ; i++)
            {
                console.log(lstTrace.get(i).toString());
            }
            tc.applyOn(kPCM) ;
            var tracker = new Kotlin.modules['KPCMMM'].org.kevoree.modeling.api.util.ModelTracker(compare);
            tracker.track(kPCM) ;
            console.log("original name " + kPCM.name);
            kPCM.name ="test";

            console.log("modified name " + kPCM.name);

            console.log("Trace");

            var ts2 = tracker.traceSequence;

            for(var i = 0 ; i < ts2.traces.size() ; i++)
            {
                console.log(ts2.traces.get(i).toString());
            }
            console.log("undo ");
            tracker.undo() ;
            console.log("modified name " + kPCM.name);

        });

    });






</script>

</body>
</html>